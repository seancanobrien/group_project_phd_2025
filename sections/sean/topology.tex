\subsection{The classifying space of a complex of groups}
We have already discussed how to create spaces from scwols.
In fact, we may view scwols as a discrete model of such spaces.
We now work to define a space related to a complex of groups.
The fundamental group of this space can be computed directly from the algebraic structure of the complex of groups.

Given a scwol $\calx$, homotopy in $\abs{\calx}$ is well modelled by the category structure in $\calx$.
Let  $E^{\pm}(\calx)$ denote abstract symbols, that should be thought of as \emph{oriented edge paths} in $\calx$.
We set $i(a^+) = i(a)$, $t(a^+) = t(a)$, $i(a^-) = t(a)$ and $t(a^-)= i(a)$.
For example, we may think of $a^-$ as the isometric embedding $\gamma \colon [0,1] \to a \subseteq \abs{\calx}$ such that  $\gamma(0) = t(a)$ and $\gamma(1) = i(a)$.
We should also think of $(\_)^\pm$ as a map $E^\pm(\calx) \to E^\pm(\calx)$ in the obvious way, where  $(a^-)^-= a^+$ etc.
\begin{definition}
	An edge path from $\sigma$ to  $\tau$ in $\abs{\calx}$ is a tuple $(e_1, \ldots, e_n) \in \left(E^\pm(\calx)\right)^n$ such that $i(e_1)=\sigma$,  $t(e_n)=\tau$ and  $t(e_i) = i(e_{i+1})$ for all  $1 \leq i < n$.
	\label{def:edge_path_in_scwol}
\end{definition}
We can define homotopy of such edge paths in the following way.
Given an edge path $(e_1, \ldots, e_n) \in \left(E^\pm(\calx)\right)^n$, we may do the following replacements:
\begin{enumerate}
	\item Any adjacent subpath $(e_i,e_{i+1})$, where $e_i=e_{i+1}^-$ can be deleted.
	\item Any adjacent subpath $(e_i,e_{i+1})$, where $e_i = b^+$ and  $e_{i+1}=a^+$ can be replaced by the subpath $((ab)^+)$, which is guaranteed to exist.
	      Similarly, if $e_i = b^-$ and  $e_{i+1}=a^-$, we can replace $(e_i,e_{i+1})$ with  $((ba)^-)$.
\end{enumerate}
A homotopy of edge paths is a sequence of such edge path replacements, and their inverses.
We can then define the fundamental group of $\calx$,  $\pi_1(\calx,\sigma_0)$, to be the homotopy class of edge paths that start and end at  $\sigma_0$.
This is isomorphic to the usual $\pi_1(\abs{\calx}, \sigma_0)$ by \cite[Corollary 4.12]{hatcher_algebraic_2001}.

We now define a category whose topology (via the geometric realisation) encodes some of the algebra of a complex of groups.
\begin{definition}
	Given a complex of groups $\calg$ over the scwol  $\calx$, we define the category $C\calg$ as follows.
	The objects of  $C\calg$ are the objects (vertices) of $\calx$.
	The morphisms of $C\calg$ are the tuples $(g,\alpha) \colon i(\alpha) \to t(\alpha)$, where  $g \in G_{t(\alpha)}$ and  $\alpha$ is a (potentially identity) morphism in $\calx$.
	The composition  $(g,\alpha)(h,\beta)$ exists when  $t(\beta) = i(\alpha)$ in  $\calx$, and it is defined to be
	\[
		(g,\alpha)(h,\beta) \coloneq (g\phi_\alpha(h)g_{\alpha,\beta}, \alpha\beta)
		.\]
	For this definition, we take $\phi_{\alpha}$ to be $\id_{G_\sigma}$ if $\alpha = \id_\sigma$, and $g_{\alpha,\beta}$ to be the identity in $G_{t(\alpha)}$ if either of $\alpha$ or  $\beta$ are identity morphisms.
\end{definition}
Compatibility condition (2) in \cref{def:complex_of_groups} guarantees associativity of this composition in  $C\calg$.
We can apply the construction of the geometric realisation of a scwol in \cref{def:geometric_realisation_of_scwol} to any category $\calc$.
The only modification is that we consider non-identity endomorphisms in our composable tuples (which did not exist in the case of scwols).
For example, if we take $\calg$ to be the complex of groups of a group  $G$ over the trivial scwol, then the 2-skeleton of $\abs{C\calg}$  is the presentation complex of $G$ with generating set $G$.

Let $G \sqcup H$ denote the free product of the groups $G$ and $H$.
Let $F_S$ denote the free group generated by  $S$.
\begin{definition}
	Given a complex of groups $\calg = (G_\sigma, \phi_a, g_{a,b})$ over the scwol $\calx$, let
	\[
		\widetilde{F\calg} =  F_{E^\pm(\calx)} \sqcup \bigsqcup_{\sigma \in V(\calx)} G_\sigma
		.\]
	We then define the \emph{universal group} $F\calg$ associated to $\calg$ to be the quotient of $\widetilde{F\calg}$ subject to the relations  $R$, where
	\[
		R = \left\{
		\begin{array}{l}
			(a^+)^{-1}   = a^-     \\
			(a^-)^{-1}   = a^+     \\
			a^+b^+(ab)^- = g_{a,b} \\
			\phi_a(g)    = a^+ga^-
		\end{array}
		\right\}
	\]
	for all $a,b,ab \in E(\calx)$ and $g \in G_\sigma$ for which the relevant expression is well-defined.
\end{definition}
There is a natural morphism $i \colon \calg \to F\calg$ where $g \in G_\sigma$ is mapped to the corresponding generator in $F\calg$, and  $a \in E(\calx)$ is sent to $a^+$.
The relations in $F\calg$ are exactly the ones needed to make  $i$ a morphism in the sense of \cref{def:morphism_of_complex_of_groups_to_group}.
The group $F\calg$ is universal in that these relations are minimal.
Specifically, given any morphism $\omega \colon \calg \to G$, there is a unique homomorphism $F\omega \colon F\calg \to G$ such that $f\omega \circ i = \omega$ \cite[Chapter 3.\textrm{\ensuremath{\calc}}, Section 3.2]{BrHa11}.

Consider edge paths in the category $C\calg$, like in \cref{def:edge_path_in_scwol}, except we now have non-identity endomorphisms.
As we saw in the case of scwols, homotopy is encoded by map composition, exactly the same is true in this case.
For the following examples, let the complex of groups $\calg$ be simple, consist of two vertices and correspond to the following inclusion
\[
	G_\sigma \hookrightarrow G_\tau
	.\]
The edge paths will be in the category $C\calg$, and we consider homotopies in $\abs{C\calg}$.
\begin{example}
	Let $e_1$ and $e_2$ be positively oriented edges corresponding to the maps $g,h \in G_\sigma$.
	These are loops, so  $i(e_1)=i(e_2)=t(e_1)=t(e_2)=\sigma$.
	There is a homotopy from the path $(e_1, e_2)$ to $(e_3)$ where $e_3$ is the loop starting and ending at $\sigma$ which corresponds to $hg\in G_\sigma$.
\end{example}
\begin{example}
	Let $e_1$ be the positively oriented edge with $i(e_1)=\sigma$ and  $t(e_1) = \tau$, which corresponds to $g \in G_\tau$.
	Let $e_2$ be the positively oriented edge with $i(e_2)=\sigma$ and  $t(e_2)=\tau$, which corresponds to the identity element  $1_\tau \in G_\tau$.
	Let $e_3$ be the positively oriented loop at $\tau$ which corresponds to $g \in G_\tau$.
	The path $(e_1)$ is homotopic to the path $(e_2,e_3)$.
	Shown in the following picture.
	\[
		\begin{tikzpicture}[baseline=(r.base)]
			\tikzstyle{every label}=[font=\footnotesize]
			\tikzstyle{every node}=[font=\footnotesize]
			\node[FSC] (l) at (0,0) {};
			\node[above left] at (l) {$\sigma$};
			\node[FSC] (r) at (1.5,0.5) {};
			\node[above, yshift=2pt] at (r) {$\tau$};

			\draw[arrow_me=stealth, bend left=10] (l) to node[below] {$g$} (r);
			\draw[arrow_me=stealth, bend left=50, lightgray] (l) to node[above] {$1_\tau$} (r);
			\draw[arrow_me=stealth,  lightgray] (r) to [out=-30, in=40, looseness=30] node[above, yshift=3pt] {$1_\tau$} (r);
			\draw[arrow_me=stealth,  lightgray] (r) to [out=-120, in=-50, looseness=30] node[below] {$g$} (r);
		\end{tikzpicture}
		\quad \simeq \quad
		\begin{tikzpicture}[baseline=(r.base)]
			\tikzstyle{every label}=[font=\footnotesize]
			\tikzstyle{every node}=[font=\footnotesize]
			\node[FSC] (l) at (0,0) {};
			\node[above left] at (l) {$\sigma$};
			\node[FSC] (r) at (1.5,0.5) {};
			\node[above, yshift=2pt] at (r) {$\tau$};

			\draw[arrow_me=stealth, bend left=10, lightgray] (l) to node[below] {$g$} (r);
			\draw[arrow_me=stealth, bend left=50] (l) to node[above] {$1_\tau$} (r);
			\draw[arrow_me=stealth, lightgray] (r) to [out=-30, in=40, looseness=30] node[above, yshift=3pt] {$1_\tau$} (r);
			\draw[arrow_me=stealth] (r) to [out=-120, in=-50, looseness=30] node[below] {$g$} (r);
		\end{tikzpicture}
	\]
\end{example}
From the previous example, we see that any edge path in $F\calg$ is homotopic to a path which moves between vertices via the relevant identity element, and possibly completes some loop at each vertex.
Thus, to record an edge path in $F\calg$ up to homotopy, we should record exactly this information.

\begin{definition}
	Let $\calg$ be some complex of groups over the scwol $\calx$.
	A $\calg$ path $p$ from $\sigma$ to  $\tau$ is a tuple of the following form,
	\[
		p = (g_0, e_1, g_1, \ldots ,e_n, g_n)
	\]
	where each $e_i \in E^\pm(\calx)$, $i(e_1) = \sigma$, $t(e_n)=\tau$, $g_0 \in \G_\sigma$, and each $g_i \in G_{t(e_i)}$ for  $i \neq 0$.
	If $\sigma=\tau$, then this is a \emph{ $\calg$ loop} at  $\sigma$.
	\label{def:paths_in_complexes_of_groups}
\end{definition}

If $p = (g_0, e_1, \ldots, e_n, g_n$ is a path from $\sigma$ to  $\tau$ and  $p^\prime = (g^\prime_0, e^\prime_1, \ldots, e^\prime_n, g^\prime_n)$ is a path from $\tau$ to $\nu$, then the concatenation  $p \ast q$ is defined to be
\[
	(g_0, e_1, \ldots, e_n, g_ng^\prime_0, e_1, \ldots, e^\prime_n, g^\prime_n)
	.\]
There is a projection $\pi$ from $\calg$ paths to $F\calg$ that acts as
\[
	(g_0, e_1, \ldots, e_n, g_n) \mapsto g_0e_1\cdots e_ng_n
	.\]
Two $\calg$ paths  $p$ and $q$ are defined to be homotopic if $\pi(p) = \pi(q)$ in $F\calg$.
The fundamental group $\pi_1(\calg, \sigma_0)$ of $\calg$ at $\sigma_0$ is defined to be $\calg$ loops at  $\sigma_0$ up to homotopy, with concatenation as the group operation.
In Haefliger's work, he \emph{defines} paths and homotopy in $\calg$ as in \cref{def:edge_path_in_scwol}.
Although he does not make any explicit comparison to homotopy in $\abs{C\calg}$, by the discussion above, this correspondence is clear.
